import android.os.Bundle
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.compose.foundation.layout.*
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import kotlin.random.Random

class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            JokenpoGame()
        }
    }
}

@Composable
fun JokenpoGame() {
    // State hoisting
    var userChoice by remember { mutableStateOf("") }
    var cpuChoice by remember { mutableStateOf("") }
    var result by remember { mutableStateOf("") }

    val options = listOf("Pedra", "Papel", "Tesoura")

    fun play(choice: String) {
        userChoice = choice
        cpuChoice = options.random()

        result = when {
            userChoice == cpuChoice -> "Empate!"
            userChoice == "Pedra" && cpuChoice == "Tesoura" -> "Voc√™ venceu!"
            userChoice == "Papel" && cpuChoice == "Pedra" -> "Voc√™ venceu!"
            userChoice == "Tesoura" && cpuChoice == "Papel" -> "Voc√™ venceu!"
            else -> "Voc√™ perdeu!"
        }
    }

    // Interface
    Column(
        modifier = Modifier
            .fillMaxSize()
            .padding(16.dp),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.SpaceEvenly
    ) {
        Text(text = "Jokenp√¥", fontSize = 32.sp)

        Row(
            horizontalArrangement = Arrangement.SpaceEvenly,
            modifier = Modifier.fillMaxWidth()
        ) {
            Button(onClick = { play("Pedra") }) {
                Text("ü™® Pedra")
            }
            Button(onClick = { play("Papel") }) {
                Text("üìÑ Papel")
            }
            Button(onClick = { play("Tesoura") }) {
                Text("‚úÇÔ∏è Tesoura")
            }
        }

        Column(horizontalAlignment = Alignment.CenterHorizontally) {
            Text("Sua escolha: $userChoice", fontSize = 18.sp)
            Text("Escolha do app: $cpuChoice", fontSize = 18.sp)
            Text("Resultado: $result", fontSize = 20.sp)
        }

        Button(onClick = {
            userChoice = ""
            cpuChoice = ""
            result = ""
        }) {
            Text("Jogar Novamente")
        }
    }
}
